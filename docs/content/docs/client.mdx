---
title: Client
---
import { Callout } from 'fumadocs-ui/components/callout';

```ts
import { W, createTypedClient } from "@webroute/client"
```

In addition to the core `route` functionality, `webroute` also offers client helpers. These helpers accelerate client-side development by reducing the need for manually specifying types. Consequently, they also reduce inaccuracies and mistakes.

---


**Prerequisites**

To use client-side functionality, we first need to export the backend type information somehow. This could entail importing types in a monorepo or exporting it as an NPM package.

```ts title="backend/routes.ts"
// Define routes in object
const appRoutes = {
	PostRoute,

	// Note: Object keys are irrelevant
	foo: UserRoute,
	bar: CommentRoute,
}

// We need this information on the client-side
export type AppRoutes = typeof appRoutes;
```

<Callout>
App routes are defined in an object instead of an array to improve TypeScript inference performance.
</Callout>


## Typed Client

The typed client is an extremely lightweight, so-called "headless" client-side interface for your API. It is entirely unopinionated about how fetching is done and merely wires up end-to-end type safety, without getting in your way.

{/* TODO: Complete post-client refactor, wire up twoslash */}

```ts title="react-app/api-client.ts"
// Create a lightweight client instance
const client = createTypedClient<AppRoutes>({
	fetcher: myFetcher
})

// Each API operation is represented as a single, flat key
// in the form `{METHOD} {path}`
const getPost = client("GET /post/:id")

getPost({ id: 123 }, fetcherOptions)
```

Our custom fetcher is responsible for executing our request and parsing our response, if need be. It allows for flexible options and return types.

```ts
import { createUrl } from "@webroute/client"

const myFetcher = async (
		// Contains info about path, method, body etc.
		config,

		// Any additional parameters are exposed via the client instance
		// and fully typed.
		opts: AxiosRequestConfig
	) => {
	// `createUrl` is a small helper for combining the path pattern with path and query params.
	const url = createUrl(config);

	const res = await axios({
		method: config.method,
		url,
		data: config.body,
		...opts,
	});

	return res;
}
```

## Type Inference

`webroute` also provides some inference helpers for specific parts of your APIs type definitions.

```ts
type Endpoint = W.Endpoint<AppRoutes, "GET /post/:id">;
//   ^?
```

This is helpful for defining our own fetching functions or wrapping typed-client functionality.

```ts
type Params = Endpoint["params"]
type Result = Endpoint["output"]

export const getPost = async (params: Params): Promise<Result> => {
	// ...
}
```